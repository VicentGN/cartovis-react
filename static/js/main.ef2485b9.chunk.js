(this["webpackJsonpcartovis-react"]=this["webpackJsonpcartovis-react"]||[]).push([[0],{122:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),i=a.n(r),c=a(9),s=a.n(c),o=(a(76),a(32)),l=a(8),p=(a(77),a(78),a(13)),d=a(14),j=a(16),u=a(15),b=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsx)("h1",{className:"ml-3",children:"Cartovis"})}}]),a}(r.Component),O=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(n.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link",to:"/",children:"Inicio"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link",to:"/map",children:"Mapa"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link",to:"/userguide",children:"Gu\xeda de Usuario"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link",to:"/about",children:"Sobre el proyecto"})})]})})]})}}]),a}(r.Component),h=(a(84),function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsx)("footer",{children:Object(n.jsxs)("p",{className:"text-center",children:["Un proyecto dise\xf1ado por Vicent Garc\xeda - 2020",Object(n.jsx)("br",{})," Datos obtenidos de"," ",Object(n.jsx)("a",{className:"text-center",href:"https://hub.arcgis.com",children:"ArcGIS Hub"}),", ",Object(n.jsx)("a",{className:"text-center",href:"https://www.ign.es",children:"Instituto Geogr\xe1fico Nacional"})," e ",Object(n.jsx)("a",{className:"text-center",href:"http://www.icv.gva.es",children:"Instituto Cartogr\xe1fico Valenciano"}),Object(n.jsx)("br",{})," Icons made by"," ",Object(n.jsx)("a",{href:"https://www.flaticon.com/authors/freepik",title:"Freepik",children:"Freepik"})," ","from"," ",Object(n.jsxs)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:[" ","www.flaticon.com"]}),Object(n.jsx)("br",{}),"Icons made by"," ",Object(n.jsx)("a",{href:"https://www.flaticon.com/authors/smalllikeart",title:"smalllikeart",children:"smalllikeart"})," ","from"," ",Object(n.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})})}}]),a}(r.Component)),m=(a(85),function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={redirection:!1},e.goToMap=function(){e.setState({redirection:!0})},e}return Object(d.a)(a,[{key:"render",value:function(){return this.state.redirection?Object(n.jsx)(l.a,{to:"/map"}):Object(n.jsxs)("div",{className:"jumbotron animated fadeIn",children:[Object(n.jsx)("h1",{className:"display-4",children:"CartoVis"}),Object(n.jsx)("div",{className:"lead",children:"Todo el territorio a un s\xf3lo click"}),Object(n.jsx)("hr",{className:"my-4"}),Object(n.jsx)("button",{className:"btn btn-primary btn-lg",onClick:this.goToMap,children:"Accede al visor"})]})}}]),a}(r.Component)),v=a(147),x=a(148),g=a(149),f=a(154),y=(a(86),a(19)),N=a(152),C=a(150),w={types:[{value:"wms/wmts",label:"WMS/WMTS"}],origins:[{type:"wms/wmts",value:"pnoa",label:"Plan Nacional de Ortofotograf\xeda A\xe9rea (PNOA)",technicalAspects:{url:"https://www.ign.es/wmts/pnoa-ma?service=WMTS&layer=OI.OrthoimageCoverage&version=1.0.0&style=default&tilematrixset=GoogleMapsCompatible&request=GetTile&format=image/png&tilematrix={z}&tilecol={x}&tilerow={y}",attribution:"Teselas de PNOA cedido por \xa9 Instituto Geogr\xe1fico Nacional de Espa\xf1a"}},{type:"wms/wmts",value:"orto_icv",label:"Ortofoto 2020 Comunitat Valenciana",technicalAspects:{url:"https://terramapas.icv.gva.es/odcv05_etrs89h30_2020_3857/wmts?service=wmts&version=1.0.0&layer=01_8bits_01_RGB_05_PNG&style=default&tilematrixset=GMEPSG3857&request=GetTile&format=image/png&tilematrix={z}&tilecol={x}&tilerow={y}",attribution:"ORTOFOTO 2020 BY 4.0 \xa9 Institut Cartogr\xe0fic Valenci\xe0, Generalitat"}}]},S=a(51);var I=function(e){var t=Object(r.useState)(!1),a=Object(y.a)(t,2),i=a[0],c=a[1],s=Object(r.useState)(null),o=Object(y.a)(s,2),l=o[0],p=o[1],d=Object(r.useState)(null),j=Object(y.a)(d,2),u=j[0],b=j[1],O=Object(r.useState)([]),h=Object(y.a)(O,2),m=h[0],v=h[1],x=function(){p(null),b(null),v(null),c(!1)},g=function(){return x()},I=w.types;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(N.a,{variant:"primary",className:"w-100",onClick:function(){return c(!0)},children:"A\xf1adir servicio externo"}),Object(n.jsxs)(C.a,{show:i,onHide:g,children:[Object(n.jsx)(C.a.Header,{closeButton:!0,children:Object(n.jsx)(C.a.Title,{children:"A\xf1adir un nuevo servicio"})}),Object(n.jsxs)(C.a.Body,{children:[Object(n.jsxs)("div",{className:"selectors",children:["Tipo de recurso",Object(n.jsx)(S.a,{options:I,onChange:function(e){p(e.value),v(w.origins.filter((function(t){return t.type===e.value})))},isDisabled:l,placeholder:"Seleccione"})]}),Object(n.jsxs)("div",{children:["Origen de datos",Object(n.jsx)(S.a,{options:m,onChange:function(e){b(m.find((function(t){return t.value===e.value})))},isDisabled:!l,placeholder:"Seleccione"})]})]}),Object(n.jsxs)(C.a.Footer,{children:[Object(n.jsx)(N.a,{variant:"secondary",onClick:g,children:"Cerrar"}),Object(n.jsx)(N.a,{variant:"primary",onClick:function(){u&&(e.onSpinnerLoading(!0),e.onClickHandler(Object(n.jsx)(f.a,{attribution:u.technicalAspects.attribution,url:u.technicalAspects.url},u.technicalAspects.url)),x())},children:"Importar"})]})]})]})},k=a(50),A=a.n(k),T=a(66),E=[{id:"1",id_2:"hospitales",title:"Hospitales de Espa\xf1a",description:"Muestra los hospitales p\xfablico-privados de Espa\xf1a",url:"https://cartovis-server.herokuapp.com/hospitales",attribution:"ESRI ESPA\xd1A"},{id:"2",id_2:"guardia_civil",title:"Cuarteles de la Guardia Civil",description:"Localizaci\xf3n de las comandancias y puestos auxiliares de la Guardia Civil",url:"https://cartovis-server.herokuapp.com/guardiacivil",attribution:"ESRI ESPA\xd1A"}],G=a(67),L=a.n(G),M=a(22),D=a.n(M),P=a(146),R=a(142),_=a(145),F=a(151),V=a(153),z=Object(R.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper}}}));function B(e){var t=z(),a=i.a.useState(1),r=Object(y.a)(a,2),c=r[0],s=r[1];return Object(n.jsx)("div",{className:t.root,children:Object(n.jsx)(_.a,{component:"nav","aria-label":"main mailbox folders",style:{paddingTop:"0px"},children:e.geoRepository.map((function(t){return Object(n.jsx)("div",{style:{borderBottom:"1px solid black"},children:Object(n.jsx)(F.a,{button:!0,selected:c===t.id,onClick:function(a){return function(t,a){s(a.id),e.sendGeojson(a)}(0,t)},children:Object(n.jsx)(V.a,{primary:t.title})},t.id)})}))})})}var H=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).sendGeojson=function(){var t=Object(T.a)(A.a.mark((function t(a){var r,i;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.onSpinnerLoading(!0),t.next=3,L.a.get(a.url);case 3:r=t.sent,i=Object(n.jsx)(P.a,{data:r.data,attribution:a.attribution,pointToLayer:e.generateSymbology,onEachFeature:function(t,n){return e.generatePopUp(t,n,a.id_2)}},a.id),e.props.onClickHandler(i);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.symbology={color:"blue",fillColor:"blue",radius:3,opacity:1,fillOpacity:1},e.generateSymbology=function(t,a){return D.a.circleMarker(a,e.symbology)},e.generatePopUp=function(e,t,a){"hospitales"===a?e.properties&&e.properties.NOMBRE&&e.properties.DIRECCION&&e.properties.MUNICIPIOS&&e.properties.PROVINCIAS&&e.properties.TELEFONO&&t.bindPopup("<strong>Nombre</strong>: ".concat(e.properties.NOMBRE," <br/><strong>Direcci\xf3n</strong>: ").concat(e.properties.DIRECCION," <br/> \n\t\t\t\t<strong>Municipio</strong>: ").concat(e.properties.MUNICIPIOS," (").concat(e.properties.PROVINCIAS,")<br/><strong>Tel\xe9fono</strong>: ").concat(e.properties.TELEFONO)):"guardia_civil"===a&&e.properties&&e.properties.UNIDAD&&e.properties.LOCALIDAD&&e.properties.DOMICILIO&&e.properties.PROVINCIA&&e.properties.TELEFONO&&t.bindPopup("<strong>Unidad</strong>: ".concat(e.properties.UNIDAD," <br/><strong>Domicilio</strong>: ").concat(e.properties.DOMICILIO," <br/> \n\t\t\t\t<strong>Localidad</strong>: ").concat(e.properties.LOCALIDAD," (").concat(e.properties.PROVINCIA,")<br/><strong>Tel\xe9fono</strong>: ").concat(e.properties.TELEFONO))},e}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"title-panel",children:Object(n.jsx)("h4",{children:"Listado de capas disponibles"})}),Object(n.jsx)(B,{geoRepository:E,sendGeojson:this.sendGeojson})]})}}]),a}(r.Component),J=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).style={height:600,margin:10},n.activateSpinner=function(e){n.setState({loading:e})},n.insertWms=function(e){n.setState({wmsTileLayer:e}),n.activateSpinner(!1)},n.insertGeoJSON=function(e){n.setState({geoJSON:e}),n.activateSpinner(!1)},n.state={geoJSON:null,wmsTileLayer:null,loading:!1},n}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{id:"viewer",children:[Object(n.jsxs)("div",{className:"m-2",children:[Object(n.jsx)(H,{type:"geojson",onClickHandler:this.insertGeoJSON,onSpinnerLoading:this.activateSpinner}),Object(n.jsx)(I,{onClickHandler:this.insertWms,onSpinnerLoading:this.activateSpinner})]}),Object(n.jsxs)(v.a,{center:[38,-1],zoom:"5",style:this.style,children:[Object(n.jsx)(x.a,{}),Object(n.jsx)(g.a,{children:Object(n.jsx)(g.a.BaseLayer,{checked:!0,name:"OpenStreetMap",children:Object(n.jsx)(f.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})})}),!!this.state.wmsTileLayer&&this.state.wmsTileLayer,!!this.state.geoJSON&&this.state.geoJSON]})]}),!!this.state.loading&&Object(n.jsx)("div",{className:"spinner spinner-border text-primary",role:"status",children:Object(n.jsx)("span",{className:"sr-only",children:"Cargando..."})})]})}}]),a}(r.Component),U=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"container animated fadeIn",children:[Object(n.jsx)("h2",{className:"text-center mt-5",children:"C\xf3mo utilizar CartoVis"}),Object(n.jsxs)("p",{className:"text-center mt-3",children:[Object(n.jsx)("p",{children:"Cartovis es un visor que muestra capas de informaci\xf3n geogr\xe1fica. Su panel lateral izquierdo permite, con un s\xf3lo click, cargar una capa de una tem\xe1tica espec\xedfica. Al cargarse esa capa, es posible clicar en un elemento y obtener m\xe1s informaci\xf3n."}),Object(n.jsx)("p",{children:"Actualmente, Cartovis posee capas de localizaci\xf3n de hospitales y puestos de la Guardia Civil. Progresivamente se ir\xe1n a\xf1adiendo de nuevas."}),Object(n.jsxs)("p",{children:["Tambi\xe9n es posible visualizar servicios WMS/WMTS en este visor. El bot\xf3n ",Object(n.jsx)("i",{children:"A\xf1adir Recurso Externo"})," permite la carga de ortofotos propiedad de instituciones y/o organismos de car\xe1cter p\xfablico y que se encuentran tambi\xe9n publicados en sus respectivas webs."]}),Object(n.jsx)("p",{children:"Igualmente, destacar que los datos de las capas (Hospitales y Guardia Civil) proceden de ArcGIS y que, en ning\xfan momento, el desarrollador se responsabiliza de la informaci\xf3n publicada. De hecho, este proyecto es sin \xe1nimo de lucro y con un objetivo claramente educativo."})]})]})}}]),a}(r.Component),q=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"container animated fadeIn",children:Object(n.jsx)("div",{className:" row ",children:Object(n.jsxs)("div",{className:"col-12 ",children:[Object(n.jsx)("h2",{className:"text-center mt-5 ",children:"Acerca de CartoVis"}),Object(n.jsx)("p",{className:"text-center mt-2 ",children:"CartoVis es un proyecto que tiene como objetivo geolocalizar infraestructuras y edificios presentes en Espa\xf1a"}),Object(n.jsx)("p",{className:"text-center ",children:"El proyecto ha sido desarrollado con React y NodeJS"})]})})})}}]),a}(r.Component);var W=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(b,{}),Object(n.jsxs)(o.a,{children:[Object(n.jsx)(O,{}),Object(n.jsx)(l.b,{exact:!0,path:"/",component:m}),Object(n.jsx)(l.b,{path:"/map",component:J}),Object(n.jsx)(l.b,{path:"/userguide",component:U}),Object(n.jsx)(l.b,{path:"/about",component:q})]}),Object(n.jsx)(h,{})]})};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(W,{})}),document.getElementById("root"))},76:function(e,t,a){},78:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.ef2485b9.chunk.js.map